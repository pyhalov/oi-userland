--- libiconv-1.15/tests/Makefile.in.~1~	2016-12-04 20:19:03.000000000 +0000
+++ libiconv-1.15/tests/Makefile.in	2018-11-21 08:44:22.426697168 +0000
@@ -28,7 +28,7 @@
 
 all :
 
-check : all table-from table-to ../src/iconv_no_i18n test-shiftseq test-to-wchar
+check : all table-from table-to test-shiftseq test-to-wchar
 	$(srcdir)/check-stateless $(srcdir) ASCII
 #	/* General multi-byte encodings */
 	$(CC) $(LDFLAGS) $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(srcdir)/genutf8.c ../srclib/libicrt.a -o genutf8 && \
@@ -167,7 +167,7 @@
 
 check-extra: check-extra-@USE_EXTRA_ENCODINGS@
 check-extra-no:
-check-extra-yes: all table-from table-to ../src/iconv_no_i18n
+check-extra-yes: all table-from table-to
 #	/* AIX specific encodings */
 	$(srcdir)/check-stateless $(srcdir) CP856
 	$(srcdir)/check-stateless $(srcdir) CP922
@@ -206,34 +206,30 @@
 	$(srcdir)/check-stateless $(srcdir) ATARIST
 	$(srcdir)/check-stateless $(srcdir) RISCOS-LATIN1
 
-table-from : table-from.@OBJEXT@ ../lib/libiconv.la
-	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) table-from.@OBJEXT@ ../srclib/libicrt.a ../lib/libiconv.la -o $@
+table-from : table-from.@OBJEXT@
+	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) table-from.@OBJEXT@ ../srclib/libicrt.a -o $@
 
 table-from.@OBJEXT@ : $(srcdir)/table-from.c
 	$(CC) -c $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(srcdir)/table-from.c
 
-table-to : table-to.@OBJEXT@ ../lib/libiconv.la
-	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) table-to.@OBJEXT@ ../srclib/libicrt.a ../lib/libiconv.la -o $@
+table-to : table-to.@OBJEXT@
+	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) table-to.@OBJEXT@ ../srclib/libicrt.a -o $@
 
 table-to.@OBJEXT@ : $(srcdir)/table-to.c
 	$(CC) -c $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(srcdir)/table-to.c
 
-test-shiftseq : test-shiftseq.@OBJEXT@ ../lib/libiconv.la
-	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) test-shiftseq.@OBJEXT@ ../srclib/libicrt.a ../lib/libiconv.la -o $@
+test-shiftseq : test-shiftseq.@OBJEXT@
+	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) test-shiftseq.@OBJEXT@ ../srclib/libicrt.a -o $@
 
 test-shiftseq.@OBJEXT@ : $(srcdir)/test-shiftseq.c
 	$(CC) -c $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(srcdir)/test-shiftseq.c
 
-test-to-wchar : test-to-wchar.@OBJEXT@ ../lib/libiconv.la
-	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) test-to-wchar.@OBJEXT@ ../srclib/libicrt.a ../lib/libiconv.la -o $@
+test-to-wchar : test-to-wchar.@OBJEXT@
+	$(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(CFLAGS) test-to-wchar.@OBJEXT@ ../srclib/libicrt.a -o $@
 
 test-to-wchar.@OBJEXT@ : $(srcdir)/test-to-wchar.c
 	$(CC) -c $(INCLUDES) $(CFLAGS) $(CPPFLAGS) $(srcdir)/test-to-wchar.c
 
-# The following rule is necessary to avoid a toplevel "make -n check" failure.
-../lib/libiconv.la :
-	cd ../lib && $(MAKE) libiconv.la
-
 mostlyclean : clean
 
 clean : force
